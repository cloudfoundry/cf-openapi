type: object
allOf:
  - $ref: './BaseSchema.yaml'
  - properties:
      name:
        type: string
        description: Name of the sidecar
      command:
        type: string
        description: Command to run for the sidecar
      process_types:
        type: array
        items:
          type: string
        description: Process types that the sidecar applies to
      memory_in_mb:
        type: [integer, "null"]
        description: Memory limit for the sidecar in MB
      origin:
        type: [string, "null"]
        description: Origin of the sidecar
        enum:
          - user
          - buildpack
      relationships:
        type: object
        properties:
          app:
            $ref: './RelationshipToOne.yaml'
        description: Relationships for the sidecar
      links:
        type: object
        properties:
          self:
            $ref: './Link.yaml'
          app:
            $ref: './Link.yaml'
      metadata:
        $ref: './Metadata.yaml'
    required:
    - name
    - command
    - process_types
    - relationships
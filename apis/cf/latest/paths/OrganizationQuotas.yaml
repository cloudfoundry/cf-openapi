/v3/organization_quotas:
  get:
    summary: List organization quotas
    description: This endpoint lists all organization quota resources.
    operationId: listOrganizationQuotas
    tags:
      - Organization Quotas
    parameters:
      - $ref: '../components/parameters/Page.yaml'
      - $ref: '../components/parameters/PerPage.yaml'
      - $ref: '../components/parameters/OrderBy.yaml'
      - name: guids
        in: query
        schema:
          type: array
          items:
            type: string
        description: Comma-delimited list of organization quota guids to filter by
      - name: names
        in: query
        schema:
          type: array
          items:
            type: string
        description: Comma-delimited list of organization quota names to filter by
      - name: organization_guids
        in: query
        schema:
          type: array
          items:
            type: string
        description: Comma-delimited list of organization guids to filter by
      - $ref: '../components/parameters/CreatedAts.yaml'
      - $ref: '../components/parameters/UpdatedAts.yaml'
    responses:
      '200':
        description: OK
        content:
          application/json:
            schema:
              $ref: '../components/schemas/OrganizationQuotaList.yaml'
      '401':
        $ref: '../components/responses/Unauthorized.yaml'
  post:
    summary: Create an organization quota
    description: |-
      This endpoint creates a new organization quota, but does not assign it to a specific organization unless an organization GUID is provided in the `relationships.organizations` parameter.

      To create an organization quota you must be an admin.
    operationId: createOrganizationQuota
    tags:
      - Organization Quotas
    requestBody:
      $ref: '../components/requestBodies/OrganizationQuotaCreateRequestBody.yaml'
    responses:
      '201':
        description: Created
        content:
          application/json:
            schema:
              $ref: '../components/schemas/OrganizationQuota.yaml'
      '401':
        $ref: '../components/responses/Unauthorized.yaml'
      '422':
        $ref: '../components/responses/UnprocessableEntity.yaml'
/v3/organization_quotas/{guid}:
  get:
    summary: Get an organization quota
    description: This endpoint gets an individual organization quota resource.
    operationId: getOrganizationQuota
    tags:
      - Organization Quotas
    parameters:
      - $ref: '../components/parameters/Guid.yaml'
    responses:
      '200':
        description: OK
        content:
          application/json:
            schema:
              $ref: '../components/schemas/OrganizationQuota.yaml'
      '401':
        $ref: '../components/responses/Unauthorized.yaml'
      '404':
        $ref: '../components/responses/NotFound.yaml'
  patch:
    summary: Update an organization quota
    description: This endpoint will only update the parameters specified in the request body. Any unspecified parameters will retain their existing values.
    operationId: updateOrganizationQuota
    tags:
      - Organization Quotas
    parameters:
      - $ref: '../components/parameters/Guid.yaml'
    requestBody:
      $ref: '../components/requestBodies/OrganizationQuotaUpdateRequestBody.yaml'
    responses:
      '200':
        description: OK
        content:
          application/json:
            schema:
              $ref: '../components/schemas/OrganizationQuota.yaml'
      '401':
        $ref: '../components/responses/Unauthorized.yaml'
      '404':
        $ref: '../components/responses/NotFound.yaml'
      '422':
        $ref: '../components/responses/UnprocessableEntity.yaml'
  delete:
    summary: Delete an organization quota
    description: Organization quotas cannot be deleted when applied to any organizations.
    operationId: deleteOrganizationQuota
    tags:
      - Organization Quotas
    parameters:
      - $ref: '../components/parameters/Guid.yaml'
    responses:
      '202':
        description: Accepted
        headers:
          Location:
            description: URL of the job that is deleting the organization quota
            schema:
              type: string
              format: uri
      '401':
        $ref: '../components/responses/Unauthorized.yaml'
      '404':
        $ref: '../components/responses/NotFound.yaml'
/v3/organization_quotas/{quota_guid}/relationships/organizations:
  post:
    summary: Apply an organization quota to an organization
    description: |-
      This endpoint applies an organization quota to one or more organizations.

      Only admin users can apply an organization quota to an organization.
    operationId: applyOrganizationQuota
    tags:
      - Organization Quotas
    parameters:
      - name: quota_guid
        in: path
        required: true
        schema:
          type: string
          format: uuid
    requestBody:
      content:
        application/json:
          schema:
            $ref: '../components/schemas/RelationshipToMany.yaml'
    responses:
      '200':
        description: OK
        content:
          application/json:
            schema:
              $ref: '../components/schemas/RelationshipToMany.yaml'
      '401':
        $ref: '../components/responses/Unauthorized.yaml'
      '404':
        $ref: '../components/responses/NotFound.yaml'

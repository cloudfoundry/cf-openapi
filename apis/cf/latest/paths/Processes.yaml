/v3/processes:
  get:
    summary: List processes
    description: Retrieve all processes the user has access to.
    operationId: listProcesses
    tags:
      - Processes
    parameters:
      - $ref: '#/components/parameters/Page'
      - $ref: '#/components/parameters/PerPage'
      - $ref: '#/components/parameters/OrderBy'
      - $ref: '#/components/parameters/CreatedAts'
      - $ref: '#/components/parameters/updatedAts'
      - $ref: '#/components/parameters/labelSelector'
      - name: guids
        in: query
        schema:
          type: array
          items:
            type: string
        description: Comma-delimited list of process guids to filter by
      - name: types
        in: query
        schema:
          type: array
          items:
            type: string
        description: Comma-delimited list of process types to filter by
      - name: app_guids
        in: query
        schema:
          type: array
          items:
            type: string
        description: Comma-delimited list of app guids to filter by
      - name: space_guids
        in: query
        schema:
          type: array
          items:
            type: string
        description: Comma-delimited list of space guids to filter by
      - name: organization_guids
        in: query
        schema:
          type: array
          items:
            type: string
        description: Comma-delimited list of organization guids to filter by
    responses:
      '200':
        description: OK
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProcessList'
      '401':
        $ref: '#/components/responses/Unauthorized'
/v3/processes/{guid}:
  get:
    summary: Get a process
    description: Get a process.
    operationId: getProcess
    tags:
      - Processes
    parameters:
      - $ref: '#/components/parameters/GUID'
    responses:
      '200':
        description: OK
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Process'
      '404':
        $ref: '#/components/responses/NotFound'
  patch:
    summary: Update a process
    description: Update a process.
    operationId: updateProcess
    tags:
      - Processes
    parameters:
      - $ref: '#/components/parameters/GUID'
    requestBody:
      content:
        application/json:
          schema:
            properties:
              command:
                type: string
              health_check:
                $ref: '#/components/schemas/HealthCheck'
              metadata:
                $ref: '#/components/schemas/Metadata'
    responses:
      '200':
        description: OK
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Process'
      '404':
        $ref: '#/components/responses/NotFound'
      '422':
        $ref: '#/components/responses/UnprocessableEntity'
/v3/processes/{guid}/stats:
  get:
    summary: Get stats for a process
    description: Get stats for a process.
    operationId: getProcessStats
    tags:
      - Processes
    parameters:
      - $ref: '#/components/parameters/GUID'
    responses:
      '200':
        description: OK
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProcessStats'
      '404':
        $ref: '#/components/responses/NotFound'
/v3/processes/{guid}/actions/scale:
  post:
    summary: Scale a process
    description: Scale a process.
    operationId: scaleProcess
    tags:
      - Processes
    parameters:
      - $ref: '#/components/parameters/GUID'
    requestBody:
      content:
        application/json:
          schema:
            properties:
              instances:
                type: integer
              memory_in_mb:
                type: integer
              disk_in_mb:
                type: integer
              log_rate_limit_in_bytes_per_second:
                type: integer
    responses:
      '202':
        description: Accepted
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Process'
      '404':
        $ref: '#/components/responses/NotFound'
      '422':
        $ref: '#/components/responses/UnprocessableEntity'
/v3/processes/{guid}/instances/{index}:
  delete:
    summary: Terminate a process instance
    description: Terminate a process instance.
    operationId: terminateProcessInstance
    tags:
      - Processes
    parameters:
      - $ref: '#/components/parameters/GUID'
      - name: index
        in: path
        required: true
        schema:
          type: integer
    responses:
      '204':
        description: No Content
      '404':
        $ref: '#/components/responses/NotFound'
/v3/apps/{guid}/processes:
  get:
    summary: List processes for an app
    description: Retrieve all processes for an app.
    operationId: listAppProcesses
    tags:
      - Processes
    parameters:
      - $ref: '#/components/parameters/GUID'
      - $ref: '#/components/parameters/Page'
      - $ref: '#/components/parameters/PerPage'
      - $ref: '#/components/parameters/OrderBy'
    responses:
      '200':
        description: OK
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProcessList'
      '404':
        $ref: '#/components/responses/NotFound'
/v3/apps/{guid}/processes/{type}:
  get:
    summary: Get a process for an app
    description: Get a specific process for an app.
    operationId: getProcessForApp
    tags:
      - Processes
    parameters:
      - $ref: '#/components/parameters/GUID'
      - name: type
        in: path
        required: true
        schema:
          type: string
    responses:
      '200':
        description: OK
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Process'
      '404':
        $ref: '#/components/responses/NotFound'
/v3/apps/{guid}/processes/{type}/stats:
  get:
    summary: Get stats for a process for an app
    description: Get stats for a specific process for an app.
    operationId: getProcessStatsForApp
    tags:
      - Processes
    parameters:
      - $ref: '#/components/parameters/GUID'
      - name: type
        in: path
        required: true
        schema:
          type: string
    responses:
      '200':
        description: OK
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProcessStats'
      '404':
        $ref: '#/components/responses/NotFound'
/v3/apps/{guid}/processes/{type}/actions/scale:
  post:
    summary: Scale a process for an app
    description: Scale a specific process for an app.
    operationId: scaleProcessForApp
    tags:
      - Processes
    parameters:
      - $ref: '#/components/parameters/GUID'
      - name: type
        in: path
        required: true
        schema:
          type: string
    requestBody:
      content:
        application/json:
          schema:
            properties:
              instances:
                type: integer
              memory_in_mb:
                type: integer
              disk_in_mb:
                type: integer
              log_rate_limit_in_bytes_per_second:
                type: integer
    responses:
      '202':
        description: Accepted
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Process'
      '404':
        $ref: '#/components/responses/NotFound'
      '422':
        $ref: '#/components/responses/UnprocessableEntity'
/v3/apps/{guid}/processes/{type}/instances/{index}:
  delete:
    summary: Terminate a process instance for an app
    description: Terminate a specific process instance for an app.
    operationId: terminateProcessInstanceForApp
    tags:
      - Processes
    parameters:
      - $ref: '#/components/parameters/GUID'
      - name: type
        in: path
        required: true
        schema:
          type: string
      - name: index
        in: path
        required: true
        schema:
          type: integer
    responses:
      '204':
        description: No Content
      '404':
        $ref: '#/components/responses/NotFound'

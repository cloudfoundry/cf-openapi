/v3/revisions/{guid}:
  get:
    summary: Get a revision
    description: Retrieve a revision.
    operationId: getRevision
    tags:
      - Revisions
    parameters:
      - $ref: '../components/parameters/Guid.yaml'
    responses:
      '200':
        description: Successfully retrieved revision
        content:
          application/json:
            schema:
              $ref: '../components/schemas/Revision.yaml'
        links:
          app:
            operationId: getApp
            parameters:
              guid: $response.body#/relationships/app/data/guid
            description: Retrieve the app for this revision
      '401':
        $ref: '../components/responses/Unauthorized.yaml'
      '404':
        $ref: '../components/responses/NotFound.yaml'
  patch:
    summary: Update a revision
    description: Update a revision.
    operationId: updateRevision
    tags:
      - Revisions
    parameters:
      - $ref: '../components/parameters/Guid.yaml'
    requestBody:
      description: Revision object that needs to be updated
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              metadata:
                $ref: '../components/schemas/Metadata.yaml'
            description: Request schema for updating a revision
    responses:
      '200':
        description: Successfully updated revision
        content:
          application/json:
            schema:
              $ref: '../components/schemas/Revision.yaml'
        links:
          app:
            operationId: getApp
            parameters:
              guid: $response.body#/relationships/app/data/guid
            description: Retrieve the app for this revision
      '401':
        $ref: '../components/responses/Unauthorized.yaml'
      '404':
        $ref: '../components/responses/NotFound.yaml'
      '422':
        $ref: '../components/responses/UnprocessableEntity.yaml'
/v3/revisions/{guid}/environment_variables:
  get:
    summary: Get environment variables for a revision
    description: Retrieve the environment variables that are associated with the revision.
    operationId: getRevisionEnvironmentVariables
    tags:
      - Revisions
    parameters:
      - $ref: '../components/parameters/Guid.yaml'
    responses:
      '200':
        description: Successfully retrieved revision environment variables
        content:
          application/json:
            schema:
              type: object
              properties:
                var:
                  type: object
                  description: Environment variables for the revision
                  additionalProperties:
                    type: string
                links:
                  type: object
                  properties:
                    self:
                      $ref: '../components/schemas/Link.yaml'
                    revision:
                      $ref: '../components/schemas/Link.yaml'
                    app:
                      $ref: '../components/schemas/Link.yaml'
      '401':
        $ref: '../components/responses/Unauthorized.yaml'
      '404':
        $ref: '../components/responses/NotFound.yaml'
/v3/apps/{guid}/revisions:
  get:
    summary: List revisions for an app
    description: Retrieve revisions for an app the user has access to.
    operationId: listRevisionsForApp
    tags:
      - Revisions
    parameters:
      - $ref: '../components/parameters/Guid.yaml'
      - $ref: '../components/parameters/Page.yaml'
      - $ref: '../components/parameters/PerPage.yaml'
      - $ref: '../components/parameters/OrderBy.yaml'
      - $ref: '../components/parameters/LabelSelector.yaml'
      - $ref: '../components/parameters/CreatedAts.yaml'
      - $ref: '../components/parameters/UpdatedAts.yaml'
      - name: versions
        in: query
        schema:
          type: array
          items:
            type: string
        description: Comma-delimited list of revision versions to filter by
    responses:
      '200':
        description: Successfully retrieved revisions for app
        content:
          application/json:
            schema:
              $ref: '../components/schemas/RevisionList.yaml'
      '401':
        $ref: '../components/responses/Unauthorized.yaml'
      '404':
        $ref: '../components/responses/NotFound.yaml'
/v3/apps/{guid}/revisions/deployed:
  get:
    summary: List deployed revisions for an app
    description: Retrieve deployed revisions for an app the user has access to. Deployed revisions are revisions that are linked to started processes in the app.
    operationId: listDeployedRevisionsForApp
    tags:
      - Revisions
    parameters:
      - $ref: '../components/parameters/Guid.yaml'
      - $ref: '../components/parameters/Page.yaml'
      - $ref: '../components/parameters/PerPage.yaml'
      - $ref: '../components/parameters/OrderBy.yaml'
    responses:
      '200':
        description: Successfully retrieved deployed revisions for app
        content:
          application/json:
            schema:
              $ref: '../components/schemas/RevisionList.yaml'
      '401':
        $ref: '../components/responses/Unauthorized.yaml'
      '404':
        $ref: '../components/responses/NotFound.yaml'
